import{g as vt}from"../chunks/94wOsH-7.js";import{f as n,a as t,c as g,t as Z}from"../chunks/CtvB_Hsv.js";import{p as mt,a as ut,c as S,d,r as $,f as o,n as E,t as K,g as c}from"../chunks/B2myL-Op.js";import{s as O}from"../chunks/D5IRr4dr.js";import{i as V}from"../chunks/BStlHI7h.js";import{e as _t,i as pt}from"../chunks/D2IpoJVx.js";import{c as f}from"../chunks/BbXXwbeS.js";import{g as gt}from"../chunks/JhTlYO8B.js";import{c as tt,d as et,C as $t,a as ht,b as xt}from"../chunks/B_HrEZ5K.js";import{B as rt}from"../chunks/CwAKgekT.js";async function bt(){const h=localStorage.getItem("phoneNumber");if(!h)return{conversations:[],phoneNumber:null};try{return{conversations:await vt(h),phoneNumber:h}}catch(m){return console.error("Failed to load conversations:",m),{conversations:[],phoneNumber:h}}}const Ut=Object.freeze(Object.defineProperty({__proto__:null,load:bt},Symbol.toStringTag,{value:"Module"}));var yt=n('<p class="text-muted-foreground">Please connect your phone number first.</p> <!>',1),Pt=n('<p class="text-muted-foreground">No conversations yet. Make a phone call to start!</p> <!>',1),wt=n('<span class="ml-2 text-xs text-green-600">Completed</span>'),Ct=n('<span class="ml-2 text-xs text-yellow-600">In progress</span>'),Mt=n(" <!>",1),Dt=n('<div class="flex items-center justify-between"><!> <span class="text-sm text-muted-foreground"> </span></div> <!>',1),Nt=n('<span class="ml-1" title="Voice message">ðŸŽ¤</span>'),St=n('<span class="ml-1" title="Text message">ðŸ’¬</span>'),kt=n('<p class="text-sm text-muted-foreground"><span class="font-medium"> </span> <!></p>'),Tt=n("<!> <!>",1),jt=n('<div class="space-y-3"></div>'),Ft=n('<div class="min-h-screen bg-background"><div class="container max-w-2xl py-8 px-4"><div class="mb-6"><h1 class="text-2xl font-bold">Conversations</h1></div> <!></div></div>');function qt(h,m){mt(m,!0);function st(r){const s=new Date(r),x=new Date,u=x.getTime()-s.getTime(),_=Math.floor(u/6e4),l=Math.floor(u/36e5),i=Math.floor(u/864e5);return _<1?"Just now":_<60?`${_}m ago`:l<24?`${l}h ago`:i<7?`${i}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:s.getFullYear()!==x.getFullYear()?"numeric":void 0})}function ot(r,s){return r.length<=s?r:r.slice(0,s)+"..."}var L=Ft(),at=S(L),nt=d(S(at),2);{var lt=r=>{var s=g(),x=o(s);f(x,()=>et,(u,_)=>{_(u,{children:(l,i)=>{var b=g(),e=o(b);f(e,()=>tt,(y,k)=>{k(y,{class:"py-8 text-center",children:(z,T)=>{var P=yt(),A=d(o(P),2);rt(A,{href:"/profile",class:"mt-4",children:(w,j)=>{E();var G=Z("Go to Profile");t(w,G)},$$slots:{default:!0}}),t(z,P)},$$slots:{default:!0}})}),t(l,b)},$$slots:{default:!0}})}),t(r,s)},it=r=>{var s=g(),x=o(s);{var u=l=>{var i=g(),b=o(i);f(b,()=>et,(e,y)=>{y(e,{children:(k,z)=>{var T=g(),P=o(T);f(P,()=>tt,(A,w)=>{w(A,{class:"py-8 text-center",children:(j,G)=>{var H=Pt(),p=d(o(H),2);rt(p,{href:"/profile",class:"mt-4",children:(C,J)=>{E();var U=Z("View Profile");t(C,U)},$$slots:{default:!0}}),t(j,H)},$$slots:{default:!0}})}),t(k,T)},$$slots:{default:!0}})}),t(l,i)},_=l=>{var i=jt();_t(i,21,()=>m.data.conversations,pt,(b,e)=>{var y=g(),k=o(y);f(k,()=>et,(z,T)=>{T(z,{class:"cursor-pointer transition-colors hover:bg-accent/50",onclick:()=>gt(`/chats/${c(e).id}`),children:(P,A)=>{var w=Tt(),j=o(w);f(j,()=>$t,(p,C)=>{C(p,{class:"pb-2",children:(J,U)=>{var q=Dt(),F=o(q),Q=S(F);f(Q,()=>ht,(v,Y)=>{Y(v,{class:"text-lg",children:(B,W)=>{E();var a=Z();K(()=>O(a,c(e).title)),t(B,a)},$$slots:{default:!0}})});var M=d(Q,2),I=S(M,!0);$(M),$(F);var R=d(F,2);f(R,()=>xt,(v,Y)=>{Y(v,{children:(B,W)=>{E();var a=Mt(),D=o(a),ct=d(D);{var dt=N=>{var X=wt();t(N,X)},ft=N=>{var X=Ct();t(N,X)};V(ct,N=>{c(e).ended_at?N(dt):N(ft,!1)})}K(()=>O(D,`${c(e).message_count??""} message${c(e).message_count!==1?"s":""} `)),t(B,a)},$$slots:{default:!0}})}),K(v=>O(I,v),[()=>st(c(e).started_at)]),t(J,q)},$$slots:{default:!0}})});var G=d(j,2);{var H=p=>{var C=g(),J=o(C);f(J,()=>tt,(U,q)=>{q(U,{class:"pt-0",children:(F,Q)=>{var M=kt(),I=S(M),R=S(I);$(I);var v=d(I),Y=d(v);{var B=a=>{var D=Nt();t(a,D)},W=a=>{var D=St();t(a,D)};V(Y,a=>{c(e).last_message.source==="voice"?a(B):a(W,!1)})}$(M),K(a=>{O(R,`${c(e).last_message.role==="user"?"You":"AI"}:`),O(v,` ${a??""} `)},[()=>ot(c(e).last_message.content,100)]),t(F,M)},$$slots:{default:!0}})}),t(p,C)};V(G,p=>{c(e).last_message&&p(H)})}t(P,w)},$$slots:{default:!0}})}),t(b,y)}),$(i),t(l,i)};V(x,l=>{m.data.conversations.length===0?l(u):l(_,!1)},!0)}t(r,s)};V(nt,r=>{m.data.phoneNumber?r(it,!1):r(lt)})}$(at),$(L),t(h,L),ut()}export{qt as component,Ut as universal};
