import{a as be,c as E,B as ve,e as ye,i as Pe}from"../chunks/CveQ4vnV.js";import{f as r,a as t,t as se,c as C}from"../chunks/3IAQgkcG.js";import{p as F,c as u,M as K,r as i,a as I,s as h,n as U,a1 as f,t as oe,g as p}from"../chunks/DaFqHzVn.js";import{s as V}from"../chunks/CiEvsBQu.js";import{i as q}from"../chunks/CdKW0PxI.js";import{c as $}from"../chunks/DVB_Lmvf.js";import{g as we}from"../chunks/l-5YitvB.js";import{s as L}from"../chunks/B6hwyZ9q.js";import{a as Q}from"../chunks/pYQc-_kp.js";import{r as R}from"../chunks/BeFkd0eD.js";async function Ce(){const s=localStorage.getItem("phoneNumber");if(!s)return{conversations:[],phoneNumber:null};try{return{conversations:await be(s),phoneNumber:s}}catch(e){return console.error("Failed to load conversations:",e),{conversations:[],phoneNumber:s}}}const at=Object.freeze(Object.defineProperty({__proto__:null,load:Ce},Symbol.toStringTag,{value:"Module"}));var De=r("<div><!></div>");function fe(s,e){F(e,!0);let m=R(e,["$$slots","$$events","$$legacy","class","children"]);var a=De();Q(a,v=>({class:v,...m}),[()=>E("rounded-lg border bg-card text-card-foreground shadow-sm",e.class)]);var c=u(a);L(c,()=>e.children??K),i(a),t(s,a),I()}var Me=r("<div><!></div>");function ue(s,e){F(e,!0);let m=R(e,["$$slots","$$events","$$legacy","class","children"]);var a=Me();Q(a,v=>({class:v,...m}),[()=>E("p-6 pt-0",e.class)]);var c=u(a);L(c,()=>e.children??K),i(a),t(s,a),I()}var ke=r("<p><!></p>");function Ne(s,e){F(e,!0);let m=R(e,["$$slots","$$events","$$legacy","class","children"]);var a=ke();Q(a,v=>({class:v,...m}),[()=>E("text-sm text-muted-foreground",e.class)]);var c=u(a);L(c,()=>e.children??K),i(a),t(s,a),I()}var Se=r("<div><!></div>");function je(s,e){F(e,!0);let m=R(e,["$$slots","$$events","$$legacy","class","children"]);var a=Se();Q(a,v=>({class:v,...m}),[()=>E("flex flex-col space-y-1.5 p-6",e.class)]);var c=u(a);L(c,()=>e.children??K),i(a),t(s,a),I()}var Te=r("<h3><!></h3>");function Be(s,e){F(e,!0);let m=R(e,["$$slots","$$events","$$legacy","class","children"]);var a=Te();Q(a,v=>({class:v,...m}),[()=>E("text-2xl font-semibold leading-none tracking-tight",e.class)]);var c=u(a);L(c,()=>e.children??K),i(a),t(s,a),I()}var Fe=r('<p class="text-muted-foreground">Please connect your phone number first.</p> <!>',1),Ie=r('<p class="text-muted-foreground">No conversations yet. Make a phone call to start!</p> <!>',1),Ye=r('<span class="ml-2 text-xs text-green-600">Completed</span>'),Ge=r('<span class="ml-2 text-xs text-yellow-600">In progress</span>'),Oe=r(" <!>",1),ze=r('<div class="flex items-center justify-between"><!> <span class="text-sm text-muted-foreground"> </span></div> <!>',1),Ae=r('<span class="ml-1" title="Voice message">ðŸŽ¤</span>'),He=r('<span class="ml-1" title="Text message">ðŸ’¬</span>'),Je=r('<p class="text-sm text-muted-foreground"><span class="font-medium"> </span> <!></p>'),Ue=r("<!> <!>",1),Ve=r('<div class="space-y-3"></div>'),qe=r('<div class="min-h-screen bg-background"><div class="container max-w-2xl py-8"><div class="mb-6 flex items-center justify-between"><h1 class="text-2xl font-bold">Conversations</h1> <!></div> <!></div></div>');function rt(s,e){F(e,!0);function m(o){const d=new Date(o),x=new Date,y=x.getTime()-d.getTime(),P=Math.floor(y/6e4),_=Math.floor(y/36e5),g=Math.floor(y/864e5);return P<1?"Just now":P<60?`${P}m ago`:_<24?`${_}h ago`:g<7?`${g}d ago`:d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:d.getFullYear()!==x.getFullYear()?"numeric":void 0})}function a(o,d){return o.length<=d?o:o.slice(0,d)+"..."}var c=qe(),v=u(c),ne=u(v),me=h(u(ne),2);ve(me,{href:"/dashboard",variant:"outline",children:(o,d)=>{U();var x=se("Back to Dashboard");t(o,x)},$$slots:{default:!0}}),i(ne);var _e=h(ne,2);{var ge=o=>{var d=C(),x=f(d);$(x,()=>fe,(y,P)=>{P(y,{children:(_,g)=>{var D=C(),n=f(D);$(n,()=>ue,(M,Y)=>{Y(M,{class:"py-8 text-center",children:(W,G)=>{var k=Fe(),X=h(f(k),2);ve(X,{href:"/dashboard",class:"mt-4",children:(N,O)=>{U();var Z=se("Go to Dashboard");t(N,Z)},$$slots:{default:!0}}),t(W,k)},$$slots:{default:!0}})}),t(_,D)},$$slots:{default:!0}})}),t(o,d)},he=o=>{var d=C(),x=f(d);{var y=_=>{var g=C(),D=f(g);$(D,()=>fe,(n,M)=>{M(n,{children:(Y,W)=>{var G=C(),k=f(G);$(k,()=>ue,(X,N)=>{N(X,{class:"py-8 text-center",children:(O,Z)=>{var ee=Ie(),w=h(f(ee),2);ve(w,{href:"/dashboard",class:"mt-4",children:(S,te)=>{U();var ae=se("Go to Dashboard");t(S,ae)},$$slots:{default:!0}}),t(O,ee)},$$slots:{default:!0}})}),t(Y,G)},$$slots:{default:!0}})}),t(_,g)},P=_=>{var g=Ve();ye(g,21,()=>e.data.conversations,Pe,(D,n)=>{var M=C(),Y=f(M);$(Y,()=>fe,(W,G)=>{G(W,{class:"cursor-pointer transition-colors hover:bg-accent/50",onclick:()=>we(`/chats/${p(n).id}`),children:(k,X)=>{var N=Ue(),O=f(N);$(O,()=>je,(w,S)=>{S(w,{class:"pb-2",children:(te,ae)=>{var re=ze(),z=f(re),le=u(z);$(le,()=>Be,(b,H)=>{H(b,{class:"text-lg",children:(J,de)=>{U();var l=se();oe(()=>V(l,p(n).title)),t(J,l)},$$slots:{default:!0}})});var j=h(le,2),A=u(j,!0);i(j),i(z);var ce=h(z,2);$(ce,()=>Ne,(b,H)=>{H(b,{children:(J,de)=>{U();var l=Oe(),T=f(l),pe=h(T);{var $e=B=>{var ie=Ye();t(B,ie)},xe=B=>{var ie=Ge();t(B,ie)};q(pe,B=>{p(n).ended_at?B($e):B(xe,!1)})}oe(()=>V(T,`${p(n).message_count??""} message${p(n).message_count!==1?"s":""} `)),t(J,l)},$$slots:{default:!0}})}),oe(b=>V(A,b),[()=>m(p(n).started_at)]),t(te,re)},$$slots:{default:!0}})});var Z=h(O,2);{var ee=w=>{var S=C(),te=f(S);$(te,()=>ue,(ae,re)=>{re(ae,{class:"pt-0",children:(z,le)=>{var j=Je(),A=u(j),ce=u(A);i(A);var b=h(A),H=h(b);{var J=l=>{var T=Ae();t(l,T)},de=l=>{var T=He();t(l,T)};q(H,l=>{p(n).last_message.source==="voice"?l(J):l(de,!1)})}i(j),oe(l=>{V(ce,`${p(n).last_message.role==="user"?"You":"AI"}:`),V(b,` ${l??""} `)},[()=>a(p(n).last_message.content,100)]),t(z,j)},$$slots:{default:!0}})}),t(w,S)};q(Z,w=>{p(n).last_message&&w(ee)})}t(k,N)},$$slots:{default:!0}})}),t(D,M)}),i(g),t(_,g)};q(x,_=>{e.data.conversations.length===0?_(y):_(P,!1)},!0)}t(o,d)};q(_e,o=>{e.data.phoneNumber?o(he,!1):o(ge)})}i(v),i(c),t(s,c),I()}export{rt as component,at as universal};
